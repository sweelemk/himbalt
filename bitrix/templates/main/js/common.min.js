function menu(){var n=$(".ui-menu"),o=$(".overlay"),t=$("body"),i=$(".cross-head");n.on("click",function(){t.hasClass("navigation_show")||t.addClass("navigation_show")}),o.add(i).on("click",function(){t.removeClass("navigation_show")})}function Loading(){var n=this;n.options={trigger:".js-link",isAnimation:!1,body:"body",openMenuClass:"navigation_show",pages:".pages",constantSection:".constant-section",breadcumbs:".breadcumbs",menu:".menu-elements"},n.initHandler=function(){$(n.options.trigger).on("click vclick",function(o){return!$(this).hasClass("active")&&(!n.options.isAnimation&&(n.options.isAnimation=!0,n.link=$(this).attr("href"),$(n.options.body).hasClass(n.options.openMenuClass)?($(n.options.body).removeClass(n.options.openMenuClass),setTimeout(function(){n.action(n.link,!0)},300)):n.action(n.link,!0),o.preventDefault(),!1))})},n.action=function(o,t){$.ajax({url:o,dataType:"html",beforeSend:function(){$(n.options.trigger).off("click vclick"),"undefined"!=typeof viv&&viv.stop().destroy(),$(n.options.pages).addClass("transfer-pages")},success:function(i){t!==!1&&n.history(o);var s=$(i).find(".js-ajx"),e=$(i).find(".breadcumbs-inner").html(),a=s.parent().html(),c=$(i).find(".menu-elements").html();setTimeout(function(){$(".js-ajx").parent().html(a).promise().done(function(){console.log("Congratulations! AJAX success!"),s.data("pages")?($(n.options.pages).addClass("inner-page"),$(n.options.constantSection).addClass("inactive"),$(n.options.breadcumbs).addClass("show")):($(n.options.pages).removeClass("inner-page"),$(n.options.constantSection).removeClass("inactive"),$(n.options.breadcumbs).removeClass("show")),$(n.options.menu).html(c),$(n.options.breadcumbs).find(".breadcumbs-inner").html(e),n.initHandler(),n.options.isAnimation=!1,setTimeout(function(){$(n.options.pages).removeClass("transfer-pages")},500)})},800)}})},n.history=function(n){window.history.replaceState("page"+n,document.title,location.href),window.history.pushState("page"+n,document.title,n)},n.browserState=function(){$(window).bind("popstate",function(o){var t=document.location;n.action(t,!1)})},n.initHandler(),n.browserState()}$(document).ready(function(){menu()});